# 개인 회원 온보딩 시스템 및 대시보드 종합 분석 보고서

**작성일:** 2025년 10월 15일  
**프로젝트:** 20250919jobmatch  
**분석 범위:** 개인 회원(구직자) 온보딩 시스템 및 대시보드 데이터 구조

---

## 📋 목차
1. [프로젝트 구조 개요](#1-프로젝트-구조-개요)
2. [온보딩 시스템 분석](#2-온보딩-시스템-분석)
3. [데이터 구조 상세 분석](#3-데이터-구조-상세-분석)
4. [대시보드 시스템](#4-대시보드-시스템)
5. [프로필 편집 시스템](#5-프로필-편집-시스템)
6. [문제점 및 개선사항](#6-문제점-및-개선사항)
7. [기술 스택 및 의존성](#7-기술-스택-및-의존성)

---

## 1. 프로젝트 구조 개요

### 1.1 전체 아키텍처

```
프로젝트 구조:
┌─────────────────────────────────────────┐
│       Frontend (Next.js 14)             │
│  ┌──────────────┐   ┌──────────────┐   │
│  │  회원가입     │   │  소셜로그인   │   │
│  └──────┬───────┘   └──────┬───────┘   │
│         └───────────┬───────┘           │
│                     ↓                   │
│         ┌───────────────────┐           │
│         │  온보딩 시스템      │           │
│         │  (2가지 버전)      │           │
│         └─────────┬─────────┘           │
│                   ↓                     │
│         ┌───────────────────┐           │
│         │  대시보드           │           │
│         └───────────────────┘           │
└─────────────────────────────────────────┘
              ↕
┌─────────────────────────────────────────┐
│       Backend (Firebase + Supabase)      │
│  ┌──────────────┐   ┌──────────────┐   │
│  │  Firebase     │   │  Supabase    │   │
│  │  Firestore    │   │  PostgreSQL  │   │
│  │  (현재 사용)   │   │  (마이그레이션)│   │
│  └──────────────┘   └──────────────┘   │
└─────────────────────────────────────────┘
```

### 1.2 핵심 디렉토리 구조

```
app/
├── onboarding/job-seeker/           # 온보딩 시스템
│   ├── page.tsx                     # 4단계 온보딩 (일반 버전)
│   ├── quick/page.tsx               # K-Work 스타일 온페이지 온보딩
│   └── layout.tsx
├── jobseeker-dashboard/             # 구직자 대시보드
│   └── page.tsx
├── profile/edit/                    # 프로필 편집
│   ├── page.tsx                     # 통합 편집 (4단계)
│   ├── resume/page.tsx              # 이력서 관리
│   ├── experience/page.tsx          # 경력/학력
│   ├── skills/page.tsx              # 기술/언어
│   ├── preferences/page.tsx         # 선호 조건
│   └── introduction/page.tsx        # 자기소개

components/
└── onboarding/job-seeker/           # 온보딩 스텝 컴포넌트
    ├── Step1ProfileBasic.tsx        # 기본 정보
    ├── Step2_Experience.tsx         # 경력/학력
    ├── Step3_Skills.tsx             # 기술/언어
    └── Step4_Preferences.tsx        # 선호 조건

lib/
├── firebase/
│   └── jobseeker-service.ts         # Firebase 서비스 (현재 사용 중)
└── supabase/
    └── jobseeker-service.ts         # Supabase 서비스 (마이그레이션 준비)

types/
└── jobseeker-onboarding.types.ts    # 타입 정의 (최종 버전)
```

---

## 2. 온보딩 시스템 분석

### 2.1 온보딩 시스템 2가지 버전

#### 🟢 버전 1: 4단계 분리형 온보딩 (일반 버전)
**경로:** `/onboarding/job-seeker?step=1`  
**파일:** `app/onboarding/job-seeker/page.tsx`

**특징:**
- 4개의 스텝으로 나누어 순차적으로 입력
- 각 스텝별로 별도 컴포넌트 사용
- 사용자 친화적이고 단계별 안내가 명확
- 프로그레스 바 및 스텝 인디케이터 제공

**단계 구성:**
```
Step 1: 기본 정보
  - 이름, 헤드라인, 프로필 사진

Step 2: 경력 및 학력
  - 경력 사항 추가 (여러 개)
  - 학력 사항 추가 (여러 개)

Step 3: 기술 및 언어
  - 보유 기술 (다중 선택)
  - 구사 언어 (다중 선택)

Step 4: 선호 조건
  - 희망 직무
  - 희망 근무지
  - 희망 연봉
  - 고용 형태, 회사 규모, 재택근무 선호도
```

#### 🔵 버전 2: 원페이지 온보딩 (K-Work 스타일)
**경로:** `/onboarding/job-seeker/quick`  
**파일:** `app/onboarding/job-seeker/quick/page.tsx`

**특징:**
- 모든 정보를 한 페이지에서 입력
- K-Work 외국인 채용 플랫폼 스타일
- 필수 정보 위주로 간소화
- 빠른 회원가입 완료 목적

**섹션 구성:**
```
Section 1: 기본 정보
  - 국적 (중요! 한국인/외국인 구분)
  - 이름
  - 휴대폰 번호 (한국인) OR 외국인등록번호 (외국인)

Section 2: 계정 정보
  - 이메일
  - 비밀번호 (소셜 로그인 시 생략)

Section 3: 주소
  - 주소 (Daum Postcode API)
  - 상세 주소

Section 4: 개인 정보
  - 성별

Section 5: 비자 정보
  - 비자 유형 (F2, F4, F5, F6 복수 선택)

Section 6: 언어 능력
  - 한국어 능력 (TOPIK 등급)
  - 한국어 외 구사 가능 언어

Section 7: 약관 동의
  - 서비스 이용약관 (필수)
  - 개인정보 수집·이용 동의 (필수)
  - 이메일 수신 동의 (선택)
```

### 2.2 온보딩 버전 비교

| 항목 | 4단계 분리형 | 원페이지 K-Work |
|------|------------|----------------|
| **경로** | `/onboarding/job-seeker` | `/onboarding/job-seeker/quick` |
| **스텝 수** | 4단계 | 1페이지 (7섹션) |
| **입력 항목 수** | 많음 (선택 포함) | 최소 필수 항목 |
| **완료 시간** | 5-10분 | 2-3분 |
| **타겟** | 일반 구직자 | 외국인 근로자 |
| **UX** | 단계별 안내 명확 | 빠른 가입 |
| **복잡도** | 중간 | 낮음 |
| **프로필 완성도** | 높음 | 기본 |

### 2.3 온보딩 데이터 플로우

```
┌─────────────┐
│   회원가입   │ (이메일 or 소셜 로그인)
└──────┬──────┘
       ↓
┌─────────────┐
│ AuthContext │ ← Supabase Auth
│   (인증)     │
└──────┬──────┘
       ↓
┌─────────────┐
│ 온보딩 페이지 │
│ (선택: 4단계/원페이지)
└──────┬──────┘
       ↓
┌─────────────┐
│ 데이터 검증  │ (validateJobseekerOnboardingForm)
└──────┬──────┘
       ↓ (통과)
┌─────────────┐
│ Firebase     │ ← updateUserProfile() 또는
│ Firestore    │   completeOnboarding()
└──────┬──────┘
       ↓
┌─────────────┐
│ 대시보드     │ (/jobseeker-dashboard)
└─────────────┘
```

---

## 3. 데이터 구조 상세 분석

### 3.1 TypeScript 타입 정의

**파일:** `types/jobseeker-onboarding.types.ts`

#### 📦 핵심 타입: `JobseekerOnboardingFormData`

```typescript
export interface JobseekerOnboardingFormData {
  // 1. 회원 정보 입력 (필수)
  fullName: string;                    // 이름
  phone: string;                       // 휴대폰 번호 (한국인만)
  phoneVerified: boolean;              // 전화번호 인증 여부
  foreignerNumber: string;             // 외국인등록번호 (외국인만, 123456-1234567)
  foreignerNumberVerified: boolean;    // 외국인등록번호 인증 여부

  // 2. 계정 정보
  email: string;                       // 이메일 (아이디 대체)
  password: string;                    // 비밀번호
  passwordConfirm: string;             // 비밀번호 확인

  // 3. 주소
  address: string;                     // 주소
  addressDetail: string;               // 상세 주소

  // 4. 개인 정보
  nationality: string;                 // 국적
  gender: 'male' | 'female' | '';      // 성별
  birthYear: string;                   // 출생연도 (YYYY)

  // 5. 비자 정보
  visaType: string[];                  // 비자 유형 (F2, F4, F5, F6 중 복수 선택 가능)

  // 6. 한국어 능력
  koreanLevel: string;                 // 한국어 능력 (TOPIK 등급)

  // 7. 어학 능력 (한국어 외)
  otherLanguages: Array<{              // 한국어 외 구사 가능 언어
    language: string;
    proficiency: string;
  }>;

  // 8. 약관 동의
  agreeAll: boolean;                   // 전체 동의
  agreeServiceTerms: boolean;          // 서비스 이용약관
  agreePrivacyTerms: boolean;          // 개인정보 수집·이용 동의
  agreeEmailReceive: boolean;          // 이메일 수신 동의 (선택)

  // 선택 항목
  headline?: string;                   // 간단 소개
  resumeFile?: File;                   // 이력서 파일
}
```

#### 📦 프로필 타입: `JobseekerProfile` (Firebase 저장용)

```typescript
export interface JobseekerProfile {
  uid: string;
  
  // Step 1: 기본 정보
  fullName: string;
  headline?: string;
  profileImageUrl?: string;
  
  // Step 2: 경력 및 학력
  experiences?: Array<{
    id: string;
    company: string;
    position: string;
    startDate: string;
    endDate: string;
    current: boolean;
    description: string;
  }>;
  educations?: Array<{
    id: string;
    school: string;
    degree: string;
    field: string;
    startYear: string;
    endYear: string;
    current: boolean;
  }>;
  
  // Step 3: 기술 및 언어
  skills?: string[];
  languages?: string[];
  
  // Step 4: 선호 조건
  desiredPositions?: string[];       // 희망 직무
  preferredLocations?: string[];     // 희망 근무지
  salaryRange?: {
    min: string | number;
    max: string | number;
  };
  workType?: string;                 // 고용 형태
  companySize?: string;              // 회사 규모
  visaSponsorship?: boolean;         // 비자 후원 필요
  remoteWork?: string;               // 재택근무
  introduction?: string;             // 자기소개
  
  // 이력서
  resumeFileUrl?: string;
  resumeFileName?: string;
  resumeUploadedAt?: string;
  
  // 메타 정보
  onboardingCompleted?: boolean;
  userType?: string;
  createdAt?: string;
  updatedAt?: string;
  
  // 통계
  applicationsCount?: number;
  profileViews?: number;
  savedJobs?: string[];
  messagesCount?: number;
}
```

### 3.2 Supabase 데이터베이스 스키마

**파일:** `supabase/schema.sql`

#### 🗄️ 메인 테이블: `users`

```sql
CREATE TABLE users (
  -- 기본 정보
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  firebase_uid TEXT UNIQUE,            -- Firebase UID (마이그레이션용)
  email TEXT UNIQUE NOT NULL,
  user_type TEXT DEFAULT 'jobseeker',
  
  -- ===== 온보딩 Step 1: 기본 정보 =====
  full_name TEXT NOT NULL,             -- 이름 (필수)
  headline TEXT,                       -- 헤드라인/간단 소개 (선택)
  profile_image_url TEXT,              -- 프로필 사진 URL
  
  -- ===== 온보딩 Step 2: 연락처 & 신원 정보 =====
  phone TEXT NOT NULL,                 -- 휴대폰 번호 (하이픈 제거, 010xxxxxxxx)
  phone_verified BOOLEAN DEFAULT false,             -- 전화번호 인증 여부
  foreigner_number TEXT NOT NULL,      -- 외국인등록번호 (123456-1234567)
  foreigner_number_verified BOOLEAN DEFAULT false,  -- 외국인등록번호 인증 여부
  
  -- ===== 온보딩 Step 3: 주소 =====
  address TEXT NOT NULL,               -- 주소 (Daum Postcode API)
  address_detail TEXT,                 -- 상세 주소
  
  -- ===== 온보딩 Step 4: 개인 정보 =====
  nationality TEXT NOT NULL,           -- 국적 (CN, US, VN, KR 등)
  gender TEXT NOT NULL,                -- 성별 (male | female)
  birth_year INTEGER,                  -- 출생연도 (YYYY)
  
  -- ===== 온보딩 Step 5: 비자 정보 =====
  visa_types TEXT[] NOT NULL,          -- 비자 종류 (F2, F4, F5, F6 중 복수 선택)
  korean_level TEXT NOT NULL,          -- 한국어 능력 (topik1~6 | native | none)
  
  -- ===== 온보딩 Step 7: 선호 조건 (추후 확장 가능) =====
  work_type TEXT,                      -- 고용 형태 (정규직, 계약직 등)
  company_size TEXT,                   -- 선호 회사 규모
  visa_sponsorship BOOLEAN DEFAULT false,  -- 비자 스폰서십 필요 여부
  remote_work TEXT,                    -- 재택근무 선호도
  introduction TEXT,                   -- 자기소개
  
  -- ===== 이력서 =====
  resume_file_url TEXT,                -- 이력서 파일 URL (Cloudinary)
  resume_file_name TEXT,               -- 이력서 파일명
  resume_uploaded_at TIMESTAMPTZ,      -- 이력서 업로드 일시
  
  -- ===== 약관 동의 =====
  agree_email_receive BOOLEAN DEFAULT false,        -- 이메일 수신 동의 (선택)
  agree_privacy_collection BOOLEAN DEFAULT false,   -- 개인정보 수집 동의 (필수)
  
  -- ===== 메타 정보 =====
  onboarding_completed BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- ===== 통계 =====
  applications_count INTEGER DEFAULT 0,
  profile_views INTEGER DEFAULT 0,
  messages_count INTEGER DEFAULT 0
);
```

#### 🗄️ 관련 테이블

**1. `user_skills` - 보유 기술**
```sql
CREATE TABLE user_skills (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  skill_name TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, skill_name)
);
```

**2. `user_languages` - 언어 능력**
```sql
CREATE TABLE user_languages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  language_name TEXT NOT NULL,
  proficiency TEXT,                    -- BASIC | INTERMEDIATE | FLUENT | NATIVE
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, language_name)
);
```

**3. `user_experiences` - 경력 사항**
```sql
CREATE TABLE user_experiences (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  company TEXT NOT NULL,
  position TEXT NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE,
  is_current BOOLEAN DEFAULT false,
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**4. `user_educations` - 학력 사항**
```sql
CREATE TABLE user_educations (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  school TEXT NOT NULL,
  degree TEXT NOT NULL,
  field TEXT NOT NULL,
  start_year INTEGER NOT NULL,
  end_year INTEGER,
  is_current BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**5. `user_desired_positions` - 희망 직무**
```sql
CREATE TABLE user_desired_positions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  position_name TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, position_name)
);
```

**6. `user_preferred_locations` - 희망 근무지**
```sql
CREATE TABLE user_preferred_locations (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  location_name TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, location_name)
);
```

**7. `user_salary_range` - 희망 연봉**
```sql
CREATE TABLE user_salary_range (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE UNIQUE,
  min_salary INTEGER,
  max_salary INTEGER,
  currency TEXT DEFAULT 'KRW',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 3.3 Firebase Firestore 구조 (현재 사용 중)

**컬렉션:** `users/{userId}`

```javascript
{
  // 기본 정보
  "uid": "abc123...",
  "email": "user@example.com",
  "userType": "jobseeker",
  "fullName": "홍길동",
  "headline": "프론트엔드 개발자",
  "profileImageUrl": "https://...",
  
  // 경력 및 학력
  "experiences": [
    {
      "id": "exp1",
      "company": "테크 회사",
      "position": "주니어 개발자",
      "startDate": "2022-01",
      "endDate": "2024-03",
      "current": false,
      "description": "웹 애플리케이션 개발"
    }
  ],
  "educations": [
    {
      "id": "edu1",
      "school": "한국대학교",
      "degree": "학사",
      "field": "컴퓨터공학",
      "startYear": "2018",
      "endYear": "2022",
      "current": false
    }
  ],
  
  // 기술 및 언어
  "skills": ["JavaScript", "React", "Node.js"],
  "languages": ["한국어", "영어"],
  
  // 선호 조건 (평탄화된 구조 - 최신)
  "desiredPositions": ["프론트엔드 개발자", "풀스택 개발자"],
  "preferredLocations": ["서울", "경기"],
  "salaryRange": {
    "min": "3000",
    "max": "5000"
  },
  "workType": "정규직",
  "companySize": "중견기업",
  "visaSponsorship": false,
  "remoteWork": "부분",
  "introduction": "열정적인 프론트엔드 개발자입니다...",
  
  // 이력서
  "resumeFileUrl": "https://cloudinary.com/...",
  "resumeFileName": "resume.pdf",
  "resumeUploadedAt": "2024-10-15T12:00:00Z",
  
  // 메타
  "onboardingCompleted": true,
  "createdAt": "2024-10-01T10:00:00Z",
  "updatedAt": "2024-10-15T12:00:00Z",
  
  // 통계
  "applicationsCount": 5,
  "profileViews": 120,
  "messagesCount": 3
}
```

### 3.4 필드 매핑 테이블

| UI 라벨 (한글) | TypeScript | Supabase | Firebase | 타입 | 필수 |
|--------------|-----------|----------|----------|------|-----|
| 이름 | `fullName` | `full_name` | `fullName` | string | ✅ |
| 헤드라인 | `headline` | `headline` | `headline` | string | ❌ |
| 휴대폰 번호 | `phone` | `phone` | `phone` | string | ✅ (한국인) |
| 외국인등록번호 | `foreignerNumber` | `foreigner_number` | - | string | ✅ (외국인) |
| 이메일 | `email` | `email` | `email` | string | ✅ |
| 주소 | `address` | `address` | `address` | string | ✅ |
| 상세주소 | `addressDetail` | `address_detail` | `addressDetail` | string | ❌ |
| 국적 | `nationality` | `nationality` | - | string | ✅ |
| 성별 | `gender` | `gender` | - | 'male'/'female' | ✅ |
| 출생연도 | `birthYear` | `birth_year` | - | number | ❌ |
| 비자유형 | `visaType` | `visa_types` | - | string[] | ✅ |
| 한국어능력 | `koreanLevel` | `korean_level` | - | string | ✅ |
| 보유기술 | `skills` | `user_skills` (테이블) | `skills` | string[] | ❌ |
| 언어능력 | `languages` | `user_languages` (테이블) | `languages` | string[] | ❌ |
| 경력사항 | `experiences` | `user_experiences` (테이블) | `experiences` | array | ❌ |
| 학력사항 | `educations` | `user_educations` (테이블) | `educations` | array | ❌ |
| 희망직무 | `desiredPositions` | `user_desired_positions` (테이블) | `desiredPositions` | string[] | ❌ |
| 희망근무지 | `preferredLocations` | `user_preferred_locations` (테이블) | `preferredLocations` | string[] | ❌ |
| 희망연봉 | `salaryRange` | `user_salary_range` (테이블) | `salaryRange` | object | ❌ |
| 이력서URL | `resumeFileUrl` | `resume_file_url` | `resumeFileUrl` | string | ❌ |
| 자기소개 | `introduction` | `introduction` | `introduction` | string | ❌ |

---

## 4. 대시보드 시스템

### 4.1 대시보드 구조

**파일:** `app/jobseeker-dashboard/page.tsx`

**주요 기능:**
1. **프로필 완성도 체크리스트** (7개 항목)
2. **지원 현황** (지원한 채용공고 목록)
3. **추천 채용공고** (프로필 기반 AI 매칭)
4. **프로필 요약 정보**
5. **빠른 작업 링크**

### 4.2 프로필 완성도 계산

**함수:** `calculateProfileCompletion(profile)`

```typescript
// 총 10개 항목 중 완료된 항목 수 / 10 * 100
항목별 점수:
  - fullName (1점)
  - headline (1점)
  - profileImageUrl (1점)
  - experiences.length > 0 (1점)
  - educations.length > 0 (1점)
  - skills.length > 0 (1점)
  - languages.length > 0 (1점)
  - desiredPositions.length > 0 (1점)
  - preferredLocations.length > 0 (1점)
  - salaryRange.min && salaryRange.max (1점)
```

### 4.3 프로필 완성도 체크리스트 (7개 항목)

| 항목 ID | 제목 | 설명 | 완성 조건 | 편집 링크 |
|--------|------|------|----------|----------|
| `resume` | 이력서 | 이력서 파일 업로드 | `resumeFileUrl` 존재 | `/profile/edit/resume` |
| `experience` | 경력 사항 | 최소 1개 이상의 경력 | `experiences.length > 0` | `/profile/edit/experience` |
| `education` | 학력 사항 | 최소 1개 이상의 학력 | `educations.length > 0` | `/profile/edit/experience` |
| `skills` | 보유 기술 | 보유한 기술과 역량 | `skills.length > 0` | `/profile/edit/skills` |
| `languages` | 언어 능력 | 구사 가능한 언어 | `languages.length > 0` | `/profile/edit/skills` |
| `preferences` | 선호 조건 | 희망 직무 및 근무 조건 | `desiredPositions.length > 0 && preferredLocations.length > 0 && salaryRange.min` | `/profile/edit/preferences` |
| `introduction` | 자기소개 | 간단한 자기소개 | `introduction.length > 0` | `/profile/edit/introduction` |

### 4.4 대시보드 UI 섹션

#### 🎯 Hero Section
- 프로필 사진 / 이름
- 헤드라인
- 희망 근무지
- 희망 연봉
- 비자 후원 필요 여부

#### ⚠️ Profile Completion Alert
- 프로필 완성도 < 100%일 때만 표시
- 진행률 바
- "프로필 완성하기" CTA

#### 📊 Main Dashboard (왼쪽 컬럼)
- **프로필 완성하기 체크리스트** (완성도 < 100%)
  - 7개 항목 각각 완료 여부
  - 항목 클릭 시 해당 편집 페이지로 이동
- **프로필 완성 축하 메시지** (완성도 = 100%)
- **지원 현황**
- **경력 사항** (있는 경우)
- **학력 사항** (있는 경우)
- **추천 채용공고** (프로필 기반 매칭)

#### 🔧 Sidebar (오른쪽 컬럼)
- **빠른 작업** (채용공고 검색, 프로필 편집)
- **보유 기술** (태그 형태)
- **언어 능력** (목록 형태)
- **선호 조건** (희망 직무, 고용 형태, 회사 규모, 재택근무)
- **이력서** (미리보기, 다운로드)
- **자기소개** (텍스트)
- **오늘의 커리어 팁**

---

## 5. 프로필 편집 시스템

### 5.1 프로필 편집 경로

#### 🔄 통합 편집 (4단계 방식)
**경로:** `/profile/edit?step=1`  
**파일:** `app/profile/edit/page.tsx`

- 온보딩과 동일한 4단계 UI 재사용
- 기존 데이터를 불러와서 수정 가능
- 진행 상황 저장 및 이동 가능

#### 📝 개별 섹션 편집

| 섹션 | 경로 | 파일 | 설명 |
|------|------|------|------|
| 이력서 | `/profile/edit/resume` | `resume/page.tsx` | PDF/Word 업로드, 미리보기 |
| 경력/학력 | `/profile/edit/experience` | `experience/page.tsx` | 경력/학력 추가/수정/삭제 |
| 기술/언어 | `/profile/edit/skills` | `skills/page.tsx` | 기술/언어 관리 |
| 선호 조건 | `/profile/edit/preferences` | `preferences/page.tsx` | 희망 직무/근무지/연봉 |
| 자기소개 | `/profile/edit/introduction` | `introduction/page.tsx` | 자기소개 텍스트 작성 |

### 5.2 데이터 저장 플로우

```
┌─────────────────┐
│ 편집 페이지 로드  │
└────────┬────────┘
         ↓
┌─────────────────┐
│ 기존 데이터 로드  │ ← getJobseekerProfile(uid)
│ (Firebase)      │
└────────┬────────┘
         ↓
┌─────────────────┐
│   사용자 수정    │
└────────┬────────┘
         ↓
┌─────────────────┐
│   저장 버튼     │
└────────┬────────┘
         ↓
┌─────────────────┐
│ updateJobseeker │ ← updateJobseekerProfile(uid, data)
│ Profile()       │
└────────┬────────┘
         ↓
┌─────────────────┐
│ 대시보드로 이동  │ ← router.push('/jobseeker-dashboard')
└─────────────────┘
```

---

## 6. 문제점 및 개선사항

### 6.1 현재 문제점

#### 🚨 1. Firebase와 Supabase 이중 구조
- **현상:** Firebase Firestore로 작동 중이나, Supabase 마이그레이션 준비 중
- **문제:** 두 데이터베이스 간 동기화 없음
- **영향:** 데이터 일관성 문제 가능성

**파일 예시:**
```typescript
// Firebase 사용
import { getJobseekerProfile } from '@/lib/firebase/jobseeker-service';

// Supabase 사용 (온보딩 페이지 일부)
import { completeOnboarding } from '@/lib/supabase/jobseeker-service';
```

#### 🚨 2. 온보딩 시스템 중복
- **현상:** 2가지 온보딩 버전 존재 (4단계 vs 원페이지)
- **문제:** 어떤 버전을 기본으로 사용할지 불명확
- **영향:** 유지보수 부담 증가

#### 🚨 3. 데이터 구조 불일치
- **Supabase:** 정규화된 관계형 DB 구조 (별도 테이블)
  - `user_skills`, `user_languages`, `user_experiences` 등
- **Firebase:** 중첩된 Document 구조 (배열/객체)
  - `skills: []`, `languages: []`, `experiences: []`

#### 🚨 4. 필드명 불일치
- **TypeScript:** camelCase (`fullName`, `resumeFileUrl`)
- **Supabase:** snake_case (`full_name`, `resume_file_url`)
- **Firebase:** camelCase (`fullName`, `resumeFileUrl`)

변환 로직 필요:
```typescript
// 예시: Supabase Insert용 데이터 변환
export const transformJobseekerFormData = (
  formData: JobseekerOnboardingFormData
): JobseekerInsertData => {
  return {
    full_name: formData.fullName,
    phone: formData.phone.replace(/-/g, ''),
    resume_file_url: resumeFileUrl || null,
    // ...
  };
};
```

#### 🚨 5. 온보딩 K-Work 버전의 데이터 누락
- **문제:** K-Work 원페이지 온보딩은 최소 정보만 수집
  - 경력/학력/기술/선호 조건 등 누락
- **영향:** 프로필 완성도 낮음, 추천 시스템 효율 저하

### 6.2 개선 제안

#### ✅ 1. 데이터베이스 통일
**옵션 A:** Firebase로 통일
- 현재 작동 중인 시스템 유지
- Supabase 마이그레이션 중단

**옵션 B:** Supabase로 완전 마이그레이션 (권장)
- 관계형 DB의 장점 활용
- RLS(Row Level Security) 정책으로 보안 강화
- 복잡한 쿼리 최적화 가능

**마이그레이션 단계:**
1. 기존 Firebase 데이터 백업
2. Supabase 서비스 완성 (`lib/supabase/jobseeker-service.ts`)
3. Firebase → Supabase 마이그레이션 스크립트 실행
4. 모든 페이지에서 Supabase 서비스 사용으로 전환
5. Firebase 의존성 제거

#### ✅ 2. 온보딩 통합
**제안:** 하이브리드 온보딩 시스템
- **1단계:** K-Work 스타일 필수 정보 입력 (빠른 가입)
- **2단계 (선택):** 상세 프로필 작성 (4단계 온보딩)
  - 온보딩 완료 후 대시보드에서 "프로필 완성하기" 유도

```
회원가입
  ↓
K-Work 원페이지 온보딩 (필수)
  ↓
대시보드
  ↓ (선택)
4단계 프로필 완성 (추천)
```

#### ✅ 3. 타입 안전성 강화
- Supabase에서 자동 생성한 타입 사용
```bash
npx supabase gen types typescript --project-id [PROJECT_ID] > types/supabase.ts
```

- TypeScript 타입과 DB 스키마 동기화 자동화

#### ✅ 4. 데이터 검증 강화
- Zod 스키마 사용하여 런타임 검증
```typescript
import { z } from 'zod';

const JobseekerOnboardingSchema = z.object({
  fullName: z.string().min(1, "이름을 입력해주세요"),
  phone: z.string().regex(/^01[0-9]{8,9}$/, "올바른 휴대폰 번호 형식이 아닙니다"),
  // ...
});
```

#### ✅ 5. 프로필 완성도 향상 인센티브
- 프로필 완성도에 따른 혜택 명시
  - 예: "프로필 100% 완성 시 상위 노출"
  - 추천 공고 정확도 증가
- 단계별 완성 보상 (배지, 포인트 등)

---

## 7. 기술 스택 및 의존성

### 7.1 프론트엔드
- **프레임워크:** Next.js 14 (App Router)
- **언어:** TypeScript
- **스타일링:** Tailwind CSS
- **상태관리:** React Context API (`AuthContext_Supabase`)
- **애니메이션:** Framer Motion
- **아이콘:** Lucide React
- **폼 검증:** 자체 검증 함수 (`validateJobseekerOnboardingForm`)

### 7.2 백엔드
- **Firebase:**
  - Authentication
  - Firestore (현재 주 데이터베이스)
  - Storage (Cloudinary로 이전 중)
- **Supabase:**
  - PostgreSQL (마이그레이션 대상)
  - Auth (미사용)
  - RLS 정책

### 7.3 파일 업로드
- **Cloudinary:** 이력서 및 이미지 저장
- **API Routes:**
  - `/api/upload-resume` - 이력서 업로드
  - `/api/upload-image` - 프로필 이미지 업로드

### 7.4 외부 서비스
- **Daum Postcode API:** 주소 검색
- **Google OAuth:** 소셜 로그인

---

## 8. 결론 및 요약

### 8.1 현재 상태 요약

✅ **완료된 부분:**
- 2가지 온보딩 시스템 구현 (4단계, K-Work 원페이지)
- 대시보드 기본 기능 구현
- 프로필 편집 시스템 구현
- Firebase 기반 데이터 저장/조회
- Supabase 스키마 설계 완료

⚠️ **진행 중:**
- Firebase → Supabase 마이그레이션 준비
- 데이터 구조 통일 작업

### 8.2 핵심 데이터 필드 (필수)

**온보딩 시 반드시 수집해야 하는 필드:**
1. `fullName` - 이름
2. `email` - 이메일
3. `nationality` - 국적 (한국인/외국인 구분 기준)
4. `phone` (한국인) 또는 `foreignerNumber` (외국인)
5. `address` - 주소
6. `gender` - 성별
7. `visaType` - 비자 유형
8. `koreanLevel` - 한국어 능력
9. `otherLanguages` - 한국어 외 언어
10. `agreeServiceTerms` - 서비스 이용약관 (필수)
11. `agreePrivacyTerms` - 개인정보 수집 동의 (필수)

**대시보드 프로필 완성을 위한 추가 필드 (선택):**
1. `resumeFileUrl` - 이력서
2. `experiences` - 경력 사항
3. `educations` - 학력 사항
4. `skills` - 보유 기술
5. `languages` - 언어 능력
6. `desiredPositions` - 희망 직무
7. `preferredLocations` - 희망 근무지
8. `salaryRange` - 희망 연봉
9. `introduction` - 자기소개

### 8.3 최종 권장사항

1. **데이터베이스 통일**: Supabase로 완전 마이그레이션 (관계형 DB 장점 활용)
2. **온보딩 단순화**: K-Work 원페이지를 기본으로, 추가 정보는 대시보드에서 유도
3. **타입 안전성**: Supabase 자동 생성 타입 + Zod 검증
4. **프로필 완성도 인센티브**: 명확한 혜택 제시로 완성도 향상 유도
5. **문서화**: API 문서 및 데이터 구조 문서 최신화

---

## 📎 참고 파일 목록

### 온보딩 관련
- `app/onboarding/job-seeker/page.tsx` - 4단계 온보딩
- `app/onboarding/job-seeker/quick/page.tsx` - K-Work 원페이지 온보딩
- `types/jobseeker-onboarding.types.ts` - 타입 정의

### 대시보드 관련
- `app/jobseeker-dashboard/page.tsx` - 구직자 대시보드

### 프로필 편집 관련
- `app/profile/edit/page.tsx` - 통합 편집
- `app/profile/edit/resume/page.tsx` - 이력서
- `app/profile/edit/experience/page.tsx` - 경력/학력
- `app/profile/edit/skills/page.tsx` - 기술/언어
- `app/profile/edit/preferences/page.tsx` - 선호 조건
- `app/profile/edit/introduction/page.tsx` - 자기소개

### 서비스 로직
- `lib/firebase/jobseeker-service.ts` - Firebase 서비스 (현재 사용)
- `lib/supabase/jobseeker-service.ts` - Supabase 서비스 (마이그레이션 대상)

### 데이터베이스 스키마
- `supabase/schema.sql` - Supabase DB 스키마

---

**보고서 종료**

