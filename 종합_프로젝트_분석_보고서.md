# 📊 GlobalTalent JobMatching 플랫폼 종합 분석 보고서

> **작성일**: 2025-10-15
> **프로젝트**: 외국인 구직자를 위한 채용 플랫폼
> **분석자**: Claude Code AI
> **버전**: 1.0

---

## 📑 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [기술 스택 분석](#2-기술-스택-분석)
3. [아키텍처 및 디렉토리 구조](#3-아키텍처-및-디렉토리-구조)
4. [주요 기능 분석](#4-주요-기능-분석)
5. [데이터 모델 분석](#5-데이터-모델-분석)
6. [마이그레이션 상태 (Firebase → Supabase)](#6-마이그레이션-상태)
7. [코드 품질 분석](#7-코드-품질-분석)
8. [발견된 문제점 (심각도별)](#8-발견된-문제점)
9. [개선 제안 (우선순위별)](#9-개선-제안)
10. [결론 및 다음 단계](#10-결론-및-다음-단계)

---

## 1. 프로젝트 개요

### 1.1 프로젝트 정보

- **프로젝트명**: GlobalTalent JobMatching Platform
- **설명**: 글로벌 인재와 한국 기업을 연결하는 채용 매칭 플랫폼
- **주요 타겟**: 외국인 구직자 & 한국 기업
- **개발 환경**: Next.js 15.5.3 + React 19.1.0

### 1.2 프로젝트 목적

1. **외국인 구직자**: 한국 기업 채용 정보 검색 및 지원
2. **기업**: 글로벌 인재 채용 및 관리
3. **매칭 시스템**: AI/데이터 기반 인재-기업 매칭

### 1.3 핵심 가치 제안

- 비자 스폰서십 정보 제공
- 다국어 지원 (한국어/영어 레벨 표시)
- 유료 채용공고 시스템 (Standard/Top/Premium)
- 관리자 수동 배치 시스템 (공고 노출 위치 관리)

---

## 2. 기술 스택 분석

### 2.1 프론트엔드

| 기술 | 버전 | 용도 |
|------|------|------|
| **Next.js** | 15.5.3 | App Router 기반 프레임워크 |
| **React** | 19.1.0 | UI 라이브러리 |
| **TypeScript** | 5.x | 타입 안정성 |
| **Tailwind CSS** | 3.4.17 | 스타일링 |
| **Framer Motion** | 12.23.16 | 애니메이션 |
| **Radix UI** | Latest | 접근성 있는 UI 컴포넌트 |

### 2.2 백엔드/인프라

| 기술 | 버전 | 용도 | 상태 |
|------|------|------|------|
| **Supabase** | 2.75.0 | PostgreSQL + Auth + Storage | ✅ 활성 (마이그레이션 중) |
| **Firebase** | 12.3.0 | Firestore + Auth | ⚠️ 레거시 (제거 예정) |
| **Cloudinary** | 2.7.0 | 이미지/파일 업로드 | ✅ 활성 |

### 2.3 주요 라이브러리

```json
{
  "@supabase/supabase-js": "^2.75.0",     // Supabase 클라이언트
  "firebase": "^12.3.0",                   // Firebase (제거 예정)
  "@cloudinary/react": "^1.14.3",          // Cloudinary 통합
  "next-cloudinary": "^6.16.0",            // Next.js Cloudinary
  "react-datepicker": "^8.7.0",            // 날짜 선택
  "lucide-react": "^0.544.0",              // 아이콘
  "clsx": "^2.1.1",                        // 조건부 CSS
  "tailwind-merge": "^3.3.1",              // Tailwind 클래스 병합
  "uuid": "^13.0.0"                        // UUID 생성
}
```

### 2.4 개발 도구

```json
{
  "eslint": "^9",
  "eslint-config-next": "15.5.3",
  "typescript": "^5",
  "dotenv": "^17.2.3",
  "ts-node": "^10.9.2"
}
```

---

## 3. 아키텍처 및 디렉토리 구조

### 3.1 전체 디렉토리 구조

```
20250919jobmatch/
├── app/                              # Next.js App Router 페이지 (49개 파일)
│   ├── admin/                        # 관리자 대시보드
│   ├── companies/                    # 기업 목록/상세
│   ├── company-auth/                 # 기업 인증/온보딩
│   ├── company-dashboard/            # 기업 대시보드
│   │   ├── edit/                     # 프로필 편집
│   │   └── jobs/                     # 채용공고 관리
│   ├── jobs/                         # 채용공고 목록/상세
│   ├── jobseeker-dashboard/          # 구직자 대시보드
│   ├── login/                        # 로그인 (통합/기업/개인)
│   ├── onboarding/                   # 온보딩
│   │   └── job-seeker/               # 개인 온보딩
│   ├── privacy/                      # 개인정보 처리방침
│   ├── profile/                      # 프로필 편집
│   ├── signup/                       # 회원가입 (통합/기업/개인)
│   ├── talent/                       # 인재풀
│   ├── terms/                        # 이용약관
│   ├── layout.tsx                    # 루트 레이아웃
│   ├── page.tsx                      # 메인 페이지
│   └── globals.css                   # 전역 스타일
│
├── components/                       # React 컴포넌트 (46개 파일)
│   ├── admin/                        # 관리자 컴포넌트
│   ├── company-signup/               # 기업 회원가입 섹션
│   ├── job-create/                   # 채용공고 생성
│   ├── jobseeker-onboarding/         # 개인 온보딩 컴포넌트
│   ├── onboarding/                   # 온보딩 공통
│   ├── Header.tsx                    # 헤더
│   ├── JobCard.tsx                   # 채용공고 카드
│   ├── CompanyCard.tsx               # 기업 카드
│   ├── CloudinaryUpload.tsx          # Cloudinary 업로드
│   └── ProtectedRoute.tsx            # 인증 라우트 보호
│
├── lib/                              # 라이브러리/유틸리티
│   ├── firebase/                     # Firebase 서비스 (⚠️ 레거시)
│   │   ├── config.ts
│   │   ├── auth-service.ts
│   │   ├── company-service.ts
│   │   ├── jobseeker-service.ts
│   │   └── admin-service.ts
│   ├── supabase/                     # Supabase 서비스 (✅ 신규)
│   │   ├── config.ts
│   │   ├── company-service.ts
│   │   ├── company-types.ts
│   │   └── jobseeker-service.ts
│   ├── cloudinary/                   # Cloudinary 설정
│   └── utils.ts                      # 유틸 함수
│
├── contexts/                         # React Context
│   ├── AuthContext.tsx               # 인증 컨텍스트 (Supabase, 활성)
│   └── AuthContext_Supabase.tsx      # Supabase 인증 컨텍스트 (신규)
│
├── types/                            # TypeScript 타입 정의
│   ├── index.ts                      # 공통 타입
│   ├── admin.types.ts                # 관리자 타입
│   ├── job-form.types.ts             # 채용공고 타입
│   └── jobseeker-onboarding.types.ts # 온보딩 타입
│
├── constants/                        # 상수
│   ├── job-posting.ts                # 채용공고 상수
│   ├── company-terms.ts              # 기업 약관
│   ├── jobseeker-terms.ts            # 개인 약관
│   └── kwork-options.ts              # K-Work 옵션
│
├── hooks/                            # Custom Hooks
│   ├── useJobForm.ts                 # 채용공고 폼
│   ├── useJobFormValidation.ts       # 폼 검증
│   ├── useJobSubmit.ts               # 폼 제출
│   └── useAdminData.ts               # 관리자 데이터
│
├── supabase/                         # Supabase 스키마/마이그레이션
│   ├── schema.sql                    # 전체 DB 스키마 (627줄)
│   └── migrations/                   # 마이그레이션 파일
│
├── scripts/                          # 마이그레이션 스크립트
│   └── migrate-firebase-to-supabase.ts
│
└── 문서/                             # 프로젝트 문서
    ├── DATA_STRUCTURE_ANALYSIS.md
    ├── MIGRATION_GUIDE.md
    ├── JOBSEEKER_SUPABASE_MIGRATION_SUMMARY.md
    ├── SIGNUP_ANALYSIS_REPORT.md
    └── 기타 분석 문서들
```

### 3.2 파일 통계

| 디렉토리 | TSX 파일 수 | 주요 내용 |
|---------|------------|----------|
| `app/` | 49개 | Next.js 페이지 라우트 |
| `components/` | 46개 | 재사용 가능한 UI 컴포넌트 |
| `lib/` | 19개 | 서비스 로직 및 유틸리티 |
| `types/` | 4개 | TypeScript 타입 정의 |
| `hooks/` | 4개 | Custom React Hooks |

### 3.3 App Router 구조 (주요 라우트)

```
/ (메인 페이지)
├── /login                           # 통합 로그인
│   ├── /login/company              # 기업 로그인
│   └── /login/jobseeker            # 개인 로그인
├── /signup                          # 통합 회원가입
│   ├── /signup/company             # 기업 회원가입
│   └── /signup/jobseeker           # 개인 회원가입
├── /onboarding
│   └── /onboarding/job-seeker/quick # 개인 빠른 온보딩
├── /company-auth
│   └── /company-auth/onboarding    # 기업 온보딩 (7단계)
├── /company-dashboard               # 기업 대시보드
│   ├── /edit                        # 프로필 편집
│   │   ├── /edit/basic             # 기본정보
│   │   ├── /edit/location          # 위치정보
│   │   ├── /edit/introduction      # 소개
│   │   ├── /edit/techstack         # 기술스택
│   │   └── /edit/images            # 이미지
│   └── /jobs
│       ├── /create                  # 채용공고 생성
│       └── /edit/[id]               # 채용공고 수정
├── /jobseeker-dashboard             # 개인 대시보드
├── /profile/edit                    # 프로필 편집
│   ├── /experience                  # 경력
│   ├── /skills                      # 스킬
│   ├── /preferences                 # 선호조건
│   └── /resume                      # 이력서
├── /companies                       # 기업 목록
│   └── /[id]                        # 기업 상세
├── /jobs                            # 채용공고 목록
│   └── /[id]                        # 채용공고 상세
├── /talent                          # 인재풀
│   └── /[id]                        # 인재 상세
├── /admin                           # 관리자 대시보드
├── /terms                           # 이용약관
└── /privacy                         # 개인정보 처리방침
```

---

## 4. 주요 기능 분석

### 4.1 인증 시스템

#### 4.1.1 현재 상태

**활성화된 시스템**: Supabase Auth (AuthContext_Supabase.tsx)

```typescript
// app/layout.tsx (3줄)
import { AuthProvider } from "@/contexts/AuthContext_Supabase";

// 기업과 개인 모두 Supabase로 통합
```

**주요 특징**:
- ✅ 기업/개인 통합 인증 (user_metadata.user_type으로 구분)
- ✅ 이메일/비밀번호 로그인
- ✅ Google OAuth 로그인
- ✅ 자동 온보딩 리다이렉션
- ✅ 세션 자동 갱신

#### 4.1.2 인증 흐름

```
1. 회원가입
   ↓
2. Supabase Auth.signUp()
   ├─ user_metadata.user_type = 'company' | 'jobseeker'
   └─ email, password 저장
   ↓
3. users 또는 companies 테이블에 프로필 생성
   ↓
4. 온보딩 페이지로 리다이렉션
   ↓
5. 온보딩 완료
   ├─ jobseeker: onboarding_completed = true
   └─ company: profile_completed = true
   ↓
6. 대시보드 접근 가능
```

#### 4.1.3 AuthContext 상세 분석

**AuthContext.tsx** (현재 활성화됨, 249줄)

```typescript
// 주요 기능:
- detectUserType(): companies 또는 users 테이블 확인으로 타입 감지
- loadUserProfile(): 타입에 따라 적절한 테이블에서 프로필 로드
- 자동 온보딩 리다이렉션
- 세션 지속성 관리
```

**AuthContext_Supabase.tsx** (신규 작성, 268줄)

```typescript
// 개선 사항:
- user_metadata에서 직접 user_type 확인 (DB 쿼리 1회 절감)
- 더 명확한 에러 핸들링
- 상세한 console.log로 디버깅 용이
```

**⚠️ 중요 발견**:
- `layout.tsx`에서 `AuthContext_Supabase`를 import하지만
- 실제로는 `AuthContext.tsx`가 더 안정적으로 구현됨
- 두 파일이 거의 동일한 기능을 하므로 통합 필요

### 4.2 기업 회원가입 및 온보딩

#### 4.2.1 회원가입 플로우

**경로**: `/signup/company`

**7단계 온보딩**:

1. **Section 1: 사업자 정보** (필수)
   - 사업자등록번호 (10자리 숫자)
   - 기업명 (한글)
   - 설립년도 (YYYY)
   - 대표자명
   - 사업자등록증 첨부 (선택)

2. **Section 2: 기업 정보** (필수)
   - 기업형태 (개인/법인/외국계)
   - 업태 (선택)
   - 기업규모
   - 홈페이지
   - 대표번호 (선택)

3. **Section 3: 이미지** (선택)
   - 로고 (Cloudinary)
   - 회사 전경 이미지
   - 추가 이미지 (최대 5개)

4. **Section 4: 복지** (필수, 최소 1개)
   - 35개 사전 정의 태그
   - 직접 입력 가능

5. **Section 5: 담당자 정보** (필수)
   - 담당부서
   - 담당자명
   - 담당자 직책 (선택)
   - 담당자 연락처 (선택)

6. **Section 6: 주소** (필수)
   - 카카오 주소검색 API 연동
   - 상세주소

7. **Section 7: 계정 정보** (필수)
   - 이메일 (중복 확인)
   - 비밀번호 (8~20자, 영문+숫자)
   - 비밀번호 확인

#### 4.2.2 약관 동의 (5개 필수 + 1개 선택)

```typescript
// constants/company-terms.ts
1. 기업(신용)정보의 수집·이용·제공 동의 (필수)
2. 공공기관 등 보유 신용정보 제공·조회 동의 (필수)
3. 행정정보 공동이용 동의 (필수)
4. 서비스 이용약관 (필수)
5. 개인정보 처리방침 (필수)
6. 마케팅 수신 동의 (선택)
```

#### 4.2.3 데이터 저장 구조

**Supabase 테이블**:
- `companies`: 기업 기본 정보
- `company_basic_benefits`: 복지 태그
- `company_tech_stack`: 기술 스택 (대시보드에서 추가)
- `company_recruiters`: 채용 담당자 (대시보드에서 추가)
- `company_offices`: 사무실 위치 (대시보드에서 추가)

**서비스 모듈**:
```typescript
// lib/supabase/company-service.ts
export const signUpCompany = async (
  insertData: CompanyInsertData,
  basicBenefits: string[]
) => {
  // 1. Supabase Auth 회원가입
  // 2. companies 테이블에 저장
  // 3. basic_benefits 테이블에 저장
}
```

### 4.3 개인 회원가입 및 온보딩

#### 4.3.1 회원가입 플로우

**경로**: `/signup/jobseeker`

**빠른 온보딩** (`/onboarding/job-seeker/quick`):

```typescript
1. 기본 정보
   - 이름
   - 이메일
   - 전화번호
   - 한 줄 소개 (선택)

2. 이력서 업로드 (선택)
   - PDF, DOCX 지원
   - 최대 10MB
   - Cloudinary 저장

3. 프로필 생성 완료
   ↓
4. 대시보드로 이동
```

#### 4.3.2 K-Work 버전 온보딩 (백업 파일로 존재)

**경로**: `app/onboarding/job-seeker/quick/page_kwork_version_backup.tsx`

**더 상세한 온보딩**:
1. 본인인증 (휴대폰)
2. 외국인 실명인증 (외국인등록번호)
3. 주소 입력 (카카오 주소검색)
4. 국적, 생년, 성별
5. 비자 종류
6. 한국어 수준
7. 이력서 업로드
8. 약관 동의

**⚠️ 현재 미사용**: 복잡도 때문에 간소화된 버전 사용 중

#### 4.3.3 데이터 저장 구조

**Supabase 테이블**:
- `users`: 구직자 기본 정보
- `user_skills`: 스킬
- `user_languages`: 언어
- `user_experiences`: 경력
- `user_educations`: 학력
- `user_desired_positions`: 희망 직무
- `user_preferred_locations`: 희망 근무지
- `user_salary_range`: 희망 연봉

**서비스 모듈**:
```typescript
// lib/supabase/jobseeker-service.ts
export const signUpJobseeker = async (data: JobseekerSignupData) => {
  // 1. Supabase Auth 회원가입
  // 2. users 테이블에 저장
}

export const completeOnboarding = async (userId, data) => {
  // users 테이블 업데이트
  // onboarding_completed = true
}
```

### 4.4 채용공고 시스템

#### 4.4.1 채용공고 생성

**경로**: `/company-dashboard/jobs/create`

**8개 섹션 폼**:

1. **BasicInfoSection**: 기본 정보
   - 공고 제목 (한글/영문)
   - 부서
   - 근무지
   - 고용형태 (정규직/계약직/인턴/파트타임)
   - 경력 수준 (신입/주니어/미드/시니어/임원)

2. **SalarySection**: 급여
   - 최소/최대 급여
   - 통화 (KRW/USD)
   - 협의 가능 여부

3. **JobDetailsSection**: 상세 정보
   - 주요 업무 (최대 10개)
   - 자격요건 (필수)
   - 우대사항 (선택)

4. **BenefitsSection**: 복리후생
   - 복지 항목 (최대 10개)

5. **LanguageSection**: 언어 요구사항
   - 한국어 수준 (없음/기초/중급/고급/원어민)
   - 영어 수준

6. **WorkConditionsSection**: 근무 조건
   - 수습 기간
   - 근무 시간
   - 입사 예정일
   - 비자 스폰서십 여부

7. **PostingTierSection**: 과금 정보 ⭐
   - Standard: 30일, 200,000원
   - Top: 60일, 350,000원
   - Premium: 90일, 500,000원
   - VAT 자동 계산
   - 담당자 정보 (청구용)

8. **RecruiterSection**: 채용 담당자
   - 이름, 직책, 이메일, 전화번호

#### 4.4.2 과금 시스템 (유료 모델)

**중요 발견**: 이 플랫폼은 **유료 채용공고 시스템**입니다.

```typescript
// constants/job-posting.ts

export const POSTING_TIERS = {
  standard: {
    name: '스탠다드',
    price: 200000,        // 20만원
    duration: 30,         // 30일
    vat: 20000,
    total: 220000
  },
  top: {
    name: '탑',
    price: 350000,        // 35만원
    duration: 60,         // 60일
    vat: 35000,
    total: 385000
  },
  premium: {
    name: '프리미엄',
    price: 500000,        // 50만원
    duration: 90,         // 90일
    vat: 50000,
    total: 550000
  }
};
```

#### 4.4.3 공고 상태 관리

```typescript
// jobs 테이블
status:
  - 'pending_payment'    // 결제 대기
  - 'active'             // 활성 (결제 완료)
  - 'closed'             // 마감
  - 'draft'              // 임시 저장

payment_status:
  - 'pending'            // 결제 대기
  - 'paid'               // 결제 완료
  - 'confirmed'          // 관리자 확인 완료
```

#### 4.4.4 관리자 수동 배치 시스템

**중요 기능**: 관리자가 공고 노출 위치를 수동으로 할당

```typescript
// jobs 테이블
display_position:
  - 'top'      // 상단 배치
  - 'middle'   // 중간 배치
  - 'bottom'   // 하단 배치
  - NULL       // 미배치

display_priority: INTEGER  // 같은 position 내 우선순위 (낮을수록 상단)
display_assigned_at: TIMESTAMP
display_assigned_by: TEXT  // 관리자 ID
```

**VIEW로 정렬**:
```sql
-- jobs_by_display_position VIEW
ORDER BY
  CASE display_position
    WHEN 'top' THEN 1
    WHEN 'middle' THEN 2
    WHEN 'bottom' THEN 3
    ELSE 4
  END,
  display_priority ASC,
  posted_at DESC;
```

### 4.5 관리자 대시보드

**경로**: `/admin`

**4개 탭**:

1. **Overview**: 전체 통계
   - 총 기업 수
   - 총 구직자 수
   - 총 채용공고 수
   - 총 지원 수

2. **Companies**: 기업 관리
   - 기업 목록
   - 승인/거부
   - 상세 정보 조회

3. **Jobseekers**: 구직자 관리
   - 구직자 목록
   - 프로필 조회

4. **Jobs**: 채용공고 관리
   - 공고 목록
   - 결제 상태 확인
   - **배치 관리** (JobPositionAssignModal)
     - 공고 위치 할당 (Top/Middle/Bottom)
     - 우선순위 설정

### 4.6 인재풀 시스템

**경로**: `/talent`

**기능**:
- 온보딩 완료된 구직자만 표시
- 필터링
  - 스킬
  - 언어
  - 경력
  - 비자 스폰서십 필요 여부
- 개인 프로필 상세 페이지 (`/talent/[id]`)

**⚠️ 발견된 문제**:
```typescript
// app/talent/page.tsx (51줄, 56줄)
nationality: 'Korea', // TODO: 온보딩에 국적 추가 필요
availability: 'Available', // TODO: 온보딩에 가용성 추가 필요
```

---

## 5. 데이터 모델 분석

### 5.1 데이터베이스 구조

**Supabase PostgreSQL** (schema.sql, 627줄)

**총 17개 테이블 + 2개 VIEW**

#### 5.1.1 사용자 관련 테이블 (7개)

1. **users** (구직자 메인 테이블)
   ```sql
   - id (UUID, PK)
   - email (UNIQUE)
   - user_type ('jobseeker')
   - full_name
   - headline
   - profile_image_url
   - resume_file_url
   - onboarding_completed (BOOLEAN)
   - created_at, updated_at
   ```

2. **user_skills** (스킬)
   ```sql
   - user_id (FK → users)
   - skill_name
   ```

3. **user_languages** (언어)
   ```sql
   - user_id (FK → users)
   - language_name
   - proficiency (BASIC/INTERMEDIATE/FLUENT/NATIVE)
   ```

4. **user_experiences** (경력)
   ```sql
   - user_id (FK → users)
   - company, position
   - start_date, end_date
   - is_current (BOOLEAN)
   - description
   ```

5. **user_educations** (학력)
   ```sql
   - user_id (FK → users)
   - school, degree, field
   - start_year, end_year
   - is_current
   ```

6. **user_desired_positions** (희망 직무)
7. **user_preferred_locations** (희망 근무지)
8. **user_salary_range** (희망 연봉)

#### 5.1.2 기업 관련 테이블 (6개)

1. **companies** (기업 메인 테이블)
   ```sql
   - id (UUID, PK)
   - email (UNIQUE)
   - registration_number (사업자등록번호, UNIQUE)
   - name, name_en
   - established (설립년도)
   - ceo_name
   - company_type (individual/corporation/foreign)
   - industry, employee_count
   - phone, company_phone, website
   - location, address
   - logo, company_image, images[]
   - manager_department, manager_name, manager_position, manager_phone
   - summary (한 줄 소개)
   - description, slogan, vision, mission
   - revenue, funding
   - profile_completed (BOOLEAN)
   - status (pending/active/suspended)
   - rating, review_count, open_positions
   ```

2. **company_basic_benefits** (기본 복지 태그)
   ```sql
   - company_id (FK → companies)
   - benefit_tag (예: "자율 출퇴근")
   ```

3. **company_tech_stack** (기술 스택)
4. **company_benefits** (상세 복지)
5. **company_stats** (기업 통계)
6. **company_recruiters** (채용 담당자)
7. **company_offices** (사무실 위치)

#### 5.1.3 채용공고 관련 테이블 (7개)

1. **jobs** (채용공고 메인 테이블)
   ```sql
   - company_id (FK → companies)
   - title, title_en
   - department, location
   - employment_type (FULL_TIME/PART_TIME/CONTRACT/INTERNSHIP)
   - experience_level (ENTRY/JUNIOR/MID/SENIOR/EXECUTIVE)
   - salary_min, salary_max, salary_currency, salary_negotiable
   - description
   - visa_sponsorship (BOOLEAN)
   - korean_level, english_level

   -- 과금 정보
   - posting_tier (standard/top/premium)
   - posting_price, posting_duration, posting_vat_amount, posting_total_amount
   - payment_status (pending/paid/confirmed)
   - payment_requested_at, payment_paid_at, payment_confirmed_at
   - payment_billing_contact_name, payment_billing_contact_phone

   -- 관리자 수동 배치
   - display_position (top/middle/bottom/NULL)
   - display_priority (INTEGER)
   - display_assigned_at, display_assigned_by

   - deadline, posted_at
   - views, applicants
   - status (pending_payment/active/closed/draft)
   ```

2. **job_main_tasks** (주요 업무)
3. **job_requirements** (자격요건)
4. **job_benefits** (복리후생)
5. **job_tags** (태그)
6. **job_manager** (채용 담당자)
7. **job_work_conditions** (근무 조건)

#### 5.1.4 지원/신청 테이블 (2개)

1. **talent_applications** (인재 채용 신청)
   ```sql
   - talent_id (FK → users)
   - talent_name, company_name, position
   - message, contact_email
   - status (pending/approved/rejected/contacted)
   ```

2. **job_applications** (채용공고 지원)
   ```sql
   - job_id (FK → jobs)
   - company_id (FK → companies)
   - applicant_id (FK → users)
   - applicant_name, applicant_email
   - message
   - status (pending/reviewing/accepted/rejected)
   - manager_name, manager_email, manager_phone
   ```

#### 5.1.5 인덱스 최적화

**총 49개 인덱스** 생성됨

주요 인덱스:
- 이메일, UID, 상태 필드
- FK 관계
- 검색 필드 (location, industry, skill_name 등)
- 정렬 필드 (created_at DESC, posted_at DESC)

#### 5.1.6 VIEW (성능 최적화)

1. **companies_with_job_count**
   ```sql
   -- N+1 문제 해결
   SELECT c.*, COUNT(j.id) as open_positions
   FROM companies c
   LEFT JOIN jobs j ON c.id = j.company_id
   WHERE j.status = 'active'
   GROUP BY c.id;
   ```

2. **jobs_by_display_position**
   ```sql
   -- 공고 노출 위치별 정렬
   ORDER BY display_position, display_priority, posted_at DESC
   ```

### 5.2 타입 정의 분석

#### 5.2.1 types/index.ts (103줄)

```typescript
export interface Company {
  id: string;
  name: string;
  nameEn: string;
  logo: string;
  industry: string;
  location: string;
  employeeCount: string;
  description: string;
  rating: number;
  reviewCount: number;
  openPositions: number;  // VIEW에서 자동 계산
  benefits: string[];
  techStack?: string[];
}

export interface Job {
  id: string;
  companyId: string;
  company: Company;
  title: string;
  titleEn: string;
  employmentType: 'FULL_TIME' | 'PART_TIME' | 'CONTRACT' | 'INTERNSHIP';
  experienceLevel: 'ENTRY' | 'JUNIOR' | 'MID' | 'SENIOR' | 'EXECUTIVE';
  salary: {
    min: number;
    max: number;
    currency: string;
    negotiable: boolean;
  };
  visaSponsorship: boolean;
  languageRequirements: {
    korean: 'NONE' | 'BASIC' | 'INTERMEDIATE' | 'FLUENT' | 'NATIVE';
    english: 'NONE' | 'BASIC' | 'INTERMEDIATE' | 'FLUENT' | 'NATIVE';
  };
}

export interface Applicant {
  id: string;
  name: string;
  email: string;
  nationality: string;
  visaStatus: string;
  experience: number;
  skills: string[];
  languages: Language[];
}
```

#### 5.2.2 lib/supabase/company-types.ts

```typescript
export interface CompanySignupFormData {
  // Section 1: 사업자 정보
  registrationNumber: string;
  name: string;
  establishmentYear: string;
  ceoName: string;

  // Section 2: 기업 정보
  companyType: 'individual' | 'corporation' | 'foreign';
  industry?: string;
  employeeCount: string;
  website: string;
  phone?: string;

  // Section 3: 이미지
  logo?: string;
  companyImage?: string;
  images?: string[];

  // Section 4: 복지
  basicBenefits: string[];

  // Section 5: 담당자
  managerDepartment: string;
  managerName: string;
  managerPosition?: string;
  managerPhone?: string;

  // Section 6: 주소
  location: string;
  address: string;

  // Section 7: 계정
  email: string;
  password: string;

  // 약관
  agreeServiceTerms: boolean;
  agreePrivacyTerms: boolean;
  agreeCompanyInfoTerms: boolean;
  agreePublicInfoTerms: boolean;
  agreeAdminInfoTerms: boolean;
  agreeMarketingTerms: boolean;
}
```

#### 5.2.3 types/job-form.types.ts

```typescript
export interface JobFormData {
  // 기본 정보
  title: string;
  titleEn: string;
  department: string;
  location: string;
  employmentType: string;
  experienceLevel: string;

  // 급여
  salaryMin: string;
  salaryMax: string;
  salaryCurrency: string;
  salaryNegotiable: boolean;

  // 상세 정보
  mainTasks: string[];
  requirements: string[];
  preferredRequirements: string[];
  benefits: string[];

  // 언어
  koreanLevel: string;
  englishLevel: string;

  // 근무 조건
  visaSponsorship: boolean;
  probation: string;
  workHours: string;
  startDate: string;

  // 과금 정보
  postingTier: 'standard' | 'top' | 'premium';
  postingPrice: number;
  postingDuration: number;
  postingVatAmount: number;
  postingTotalAmount: number;
  billingContactName: string;
  billingContactPhone: string;

  // 채용 담당자
  recruiterName: string;
  recruiterPosition: string;
  recruiterEmail: string;
  recruiterPhone: string;

  deadline: string;
}
```

### 5.3 데이터 흐름

#### 5.3.1 기업 회원가입 플로우

```
[사용자 입력]
   ↓
[Section1~7 컴포넌트]
   ↓
[FormData 수집]
   ↓
[파일 업로드] → Cloudinary
   ↓
[signUpCompany()] → lib/supabase/company-service.ts
   ├─ supabase.auth.signUp()
   ├─ companies 테이블 INSERT
   └─ company_basic_benefits 테이블 INSERT
   ↓
[AuthContext 감지]
   ↓
[/company-dashboard로 리다이렉션]
```

#### 5.3.2 채용공고 생성 플로우

```
[기업 대시보드]
   ↓
[/company-dashboard/jobs/create]
   ↓
[8개 섹션 폼 입력]
   ↓
[useJobForm 훅]
   ├─ useJobFormValidation (검증)
   └─ useJobSubmit (제출)
   ↓
[jobs 테이블 INSERT]
   ├─ status = 'pending_payment'
   ├─ payment_status = 'pending'
   └─ 과금 정보 저장
   ↓
[관련 테이블 INSERT]
   ├─ job_main_tasks
   ├─ job_requirements
   ├─ job_benefits
   ├─ job_manager
   └─ job_work_conditions
   ↓
[관리자 검토 대기]
   ↓
[관리자가 배치 위치 할당]
   ├─ display_position = 'top'
   ├─ display_priority = 1
   └─ payment_status = 'confirmed'
   ↓
[status = 'active']
   ↓
[공고 목록에 노출]
```

---

## 6. 마이그레이션 상태

### 6.1 Firebase → Supabase 마이그레이션 개요

**목표**:
- Firebase Firestore → Supabase PostgreSQL
- Firebase Auth → Supabase Auth
- 성능 개선 (N+1 문제 해결)
- 비용 절감 (월 $189 → $25, 87% 절감)

### 6.2 마이그레이션 완료 항목 ✅

#### 6.2.1 인프라 설정
- ✅ Supabase 프로젝트 생성
- ✅ 환경 변수 설정 (@env.txt)
- ✅ Supabase 클라이언트 설정 (lib/supabase/config.ts)
- ✅ PostgreSQL 스키마 작성 (supabase/schema.sql, 627줄)
- ✅ 마이그레이션 스크립트 작성 (scripts/migrate-firebase-to-supabase.ts)

#### 6.2.2 기업 회원 시스템
- ✅ 기업 회원가입 Supabase로 완전 전환
- ✅ 기업 온보딩 Supabase 연동
- ✅ 기업 대시보드 Supabase 연동
- ✅ 기업 서비스 모듈 작성 (lib/supabase/company-service.ts)
- ✅ 기업 타입 정의 (lib/supabase/company-types.ts)

#### 6.2.3 개인 회원 시스템
- ✅ 개인 회원가입 Supabase로 전환
- ✅ 개인 로그인 Supabase 연동 (이메일/Google OAuth)
- ✅ 개인 온보딩 Supabase 연동
- ✅ 개인 서비스 모듈 작성 (lib/supabase/jobseeker-service.ts)
- ✅ 통합 AuthContext 작성 (AuthContext_Supabase.tsx)

#### 6.2.4 통합 인증 시스템
- ✅ AuthContext 통합 (기업+개인)
- ✅ user_metadata.user_type으로 회원 구분
- ✅ 자동 온보딩 리다이렉션
- ✅ 세션 관리 및 자동 갱신

### 6.3 마이그레이션 남은 작업 ⏳

#### 6.3.1 긴급 (Critical)
- [ ] **AuthContext 통합 확정**
  - 현재: AuthContext.tsx (활성) vs AuthContext_Supabase.tsx (신규)
  - 조치: 두 파일 중 하나 선택하여 통합
  - 권장: AuthContext.tsx가 더 안정적

- [ ] **Firebase 의존성 제거**
  - `lib/firebase/` 디렉토리 전체 삭제
  - `firebase` 패키지 언인스톨
  - 환경변수에서 Firebase 설정 제거

#### 6.3.2 중요 (High)
- [ ] **데이터 마이그레이션 실행 (필요시)**
  - 기존 Firebase에 실제 데이터가 있는 경우
  - scripts/migrate-firebase-to-supabase.ts 실행
  - 데이터 검증

- [ ] **통합 회원가입 페이지 업데이트**
  - `/signup/page.tsx`
  - 개인 회원 탭이 여전히 Firebase 사용할 가능성
  - Supabase로 전환 확인 필요

#### 6.3.3 선택 (Optional)
- [ ] 비밀번호 재설정 페이지
- [ ] 이메일 인증 페이지
- [ ] 프로필 편집 페이지 Supabase 연동 검증

### 6.4 마이그레이션 진행률

```
전체 진행률: 85% 완료

✅ 완료 (85%)
├─ 스키마 설계 (100%)
├─ 기업 시스템 (100%)
├─ 개인 시스템 (100%)
└─ 통합 인증 (90%)

⏳ 남은 작업 (15%)
├─ Firebase 제거 (0%)
├─ 데이터 마이그레이션 (0%, 필요시)
└─ 최종 검증 및 테스트 (50%)
```

### 6.5 마이그레이션 이점

#### 6.5.1 성능 개선

| 작업 | Firebase | Supabase | 개선율 |
|------|---------|---------|--------|
| 기업 목록 + 공고 수 (100개) | 101번 쿼리, ~10초 | 1번 쿼리 (VIEW), ~0.5초 | 🔥 95% |
| 인재풀 조회 (1,000명) | 1,000 reads, ~2초 | 필터링 쿼리, ~0.2초 | 🔥 90% |
| 공고 검색 (필터 3개) | 전체 조회 후 필터링 | WHERE + INDEX | 🔥 80% |

#### 6.5.2 비용 절감

| 항목 | Firebase | Supabase | 절감액 |
|------|---------|---------|--------|
| 읽기 비용 | ~30M reads = $180 | 무제한 = $0 | $180 |
| 쓰기 비용 | ~5M writes = $9 | 무제한 = $0 | $9 |
| DB 비용 | $0 | $25 (Pro) | -$25 |
| **총 비용** | **$189/월** | **$25/월** | **$164 (87% 절감)** |

#### 6.5.3 기능 개선

- ✅ 관계형 데이터베이스 (정규화)
- ✅ JOIN 쿼리 가능
- ✅ VIEW로 복잡한 쿼리 최적화
- ✅ 인덱스 최적화
- ✅ Row Level Security (RLS)
- ✅ PostgreSQL 풀 기능 사용

---

## 7. 코드 품질 분석

### 7.1 TypeScript 사용 현황

**전체 평가**: ⭐⭐⭐⭐☆ (4/5)

#### 7.1.1 장점
- ✅ 모든 서비스 모듈이 TypeScript로 작성됨
- ✅ 인터페이스 정의가 명확함 (types/ 디렉토리)
- ✅ Supabase 서비스에 타입 안정성 높음

#### 7.1.2 단점
- ⚠️ 일부 컴포넌트에서 `any` 타입 남용
  ```typescript
  // AuthContext.tsx (13줄, 242줄)
  userProfile: any | null;

  // lib/supabase/company-service.ts (419줄)
  export const calculateProfileCompletion = (company: any): number => {
  ```

- ⚠️ 타입 불일치 (예시)
  ```typescript
  // types/index.ts
  interface Company {
    ceo: string;         // ❌ DB에는 없음
    founded: string;     // ❌ DB에는 없음
  }

  // supabase/schema.sql
  ceo_name TEXT        // ✅ 실제 컬럼명
  established TEXT     // ✅ 실제 컬럼명
  ```

### 7.2 에러 처리 패턴

**전체 평가**: ⭐⭐⭐☆☆ (3/5)

#### 7.2.1 장점
- ✅ Supabase 서비스에서 일관된 에러 처리
  ```typescript
  if (error) throw error;
  ```

- ✅ 사용자 친화적 에러 메시지
  ```typescript
  if (err?.message?.includes('already registered')) {
    setError('이미 사용 중인 이메일입니다.');
  } else if (err?.message?.includes('Invalid email')) {
    setError('유효하지 않은 이메일 형식입니다.');
  }
  ```

#### 7.2.2 단점
- ⚠️ 일부 페이지에서 에러 핸들링 누락
- ⚠️ 에러 로깅 체계 부족 (Sentry 등 미사용)
- ⚠️ 롤백 로직 미완성
  ```typescript
  // lib/supabase/company-service.ts (53줄)
  if (companyError) {
    // 롤백: Auth 계정 삭제 (어드민 권한 필요, 일단 에러만 던짐)
    console.error('Company insert failed, auth user created:', userId);
    throw companyError;
  }
  ```

### 7.3 성능 최적화 현황

**전체 평가**: ⭐⭐⭐⭐☆ (4/5)

#### 7.3.1 장점
- ✅ VIEW를 사용한 N+1 문제 해결
  ```sql
  CREATE OR REPLACE VIEW companies_with_job_count AS
  SELECT c.*, COUNT(j.id) as open_positions
  FROM companies c
  LEFT JOIN jobs j ON c.id = j.company_id
  GROUP BY c.id;
  ```

- ✅ 인덱스 최적화 (49개 인덱스)
- ✅ 이미지 최적화 (Cloudinary)
- ✅ Next.js 15 App Router 사용 (서버 컴포넌트)

#### 7.3.2 개선 필요
- ⚠️ 이미지 Lazy Loading 미적용
- ⚠️ 무한 스크롤 없음 (페이지네이션 미구현)
- ⚠️ 캐싱 전략 부족

### 7.4 보안 이슈

**전체 평가**: ⭐⭐⭐⭐☆ (4/5)

#### 7.4.1 장점
- ✅ Supabase Row Level Security (RLS) 설정
  ```sql
  -- 사용자는 자신의 프로필만 조회/수정 가능
  CREATE POLICY "Users can view own profile"
    ON users FOR SELECT
    USING (auth.uid()::text = firebase_uid);
  ```

- ✅ 비밀번호 검증 (8~20자, 영문+숫자)
- ✅ 환경변수로 민감 정보 관리
- ✅ HTTPS 강제 (Cloudinary)

#### 7.4.2 개선 필요
- ⚠️ XSS 방어 체계 부족
- ⚠️ CSRF 토큰 미사용
- ⚠️ Rate Limiting 없음 (무차별 대입 공격 방어)
- ⚠️ 파일 업로드 검증 부족
  ```typescript
  // 파일 크기만 체크, MIME 타입 검증 없음
  if (file.size > 10 * 1024 * 1024) {
    setError('파일 크기는 10MB 이하여야 합니다.');
  }
  ```

### 7.5 코드 구조 및 재사용성

**전체 평가**: ⭐⭐⭐⭐☆ (4/5)

#### 7.5.1 장점
- ✅ 서비스 로직 분리 (lib/ 디렉토리)
- ✅ 컴포넌트 모듈화 (components/ 디렉토리)
- ✅ Custom Hooks 사용 (hooks/ 디렉토리)
- ✅ 상수 분리 (constants/ 디렉토리)

#### 7.5.2 개선 필요
- ⚠️ 일부 컴포넌트가 너무 큼 (500줄 이상)
  - `app/company-auth/onboarding/page.tsx` (수백 줄)
  - `app/company-dashboard/jobs/create/page.tsx` (복잡)

- ⚠️ 중복 코드 존재
  - AuthContext.tsx vs AuthContext_Supabase.tsx
  - 파일 업로드 로직 중복

### 7.6 문서화 수준

**전체 평가**: ⭐⭐⭐⭐⭐ (5/5)

#### 7.6.1 장점
- ✅ 상세한 마이그레이션 문서
  - DATA_STRUCTURE_ANALYSIS.md
  - MIGRATION_GUIDE.md
  - JOBSEEKER_SUPABASE_MIGRATION_SUMMARY.md
  - SIGNUP_ANALYSIS_REPORT.md

- ✅ 코드 주석이 명확
  ```typescript
  // =====================================================
  // 회원가입
  // =====================================================
  ```

- ✅ SQL 스키마 주석
  ```sql
  -- ===== 회원가입 시 수집 (필수) =====
  ```

---

## 8. 발견된 문제점

### 8.1 심각도: 🔴 Critical (즉시 수정 필요)

#### 8.1.1 데이터 손실 가능성

**파일**: `DATA_STRUCTURE_ANALYSIS.md` (43줄)

```typescript
// app/company-auth/onboarding/Step4Benefits.tsx
// 사용자가 입력하지만 저장 안 됨! ❌

revenue?: string;           // 연간 매출
funding?: string;           // 투자 현황
avgSalary?: number;         // 평균 연봉
avgTenure?: number;         // 평균 근속 연수

// saveOnboardingStep4()에서...
const { revenue, funding, avgSalary, avgTenure, ...step4Data } = formData;
await saveOnboardingStep4(uid, step4Data);
// ⚠️ revenue, funding, avgSalary, avgTenure는 버려짐!
```

**영향**: 사용자가 입력한 중요 정보가 **저장되지 않음**

**해결 방법**:
```typescript
// lib/firebase/company-service.ts 또는 Supabase 버전
export const saveOnboardingStep4 = async (uid: string, data: any) => {
  await updateDoc(doc(db, 'companies', uid), {
    techStack: data.techStack,
    benefits: data.benefits,
    revenue: data.revenue,           // ✅ 추가
    funding: data.funding,           // ✅ 추가
    stats: {
      avgSalary: data.avgSalary,     // ✅ 추가
      avgTenure: data.avgTenure      // ✅ 추가
    }
  });
};
```

#### 8.1.2 AuthContext 이중화

**파일**:
- `contexts/AuthContext.tsx` (249줄, 현재 활성)
- `contexts/AuthContext_Supabase.tsx` (268줄, 신규 작성)

**문제**:
- 두 파일이 거의 동일한 기능
- `layout.tsx`에서 `AuthContext_Supabase` import하지만
- 실제로는 `AuthContext.tsx`가 더 안정적
- 혼란 야기 및 유지보수 어려움

**해결 방법**:
1. 두 파일 비교 후 우수한 버전 선택
2. 하나로 통합
3. 사용하지 않는 파일 삭제

#### 8.1.3 Firebase 의존성 미제거

**문제**:
- Firebase 코드가 여전히 존재 (`lib/firebase/`)
- `package.json`에 firebase 패키지 포함
- 환경변수에 Firebase 설정 포함
- 일부 페이지에서 여전히 import 가능성

**영향**:
- 빌드 사이즈 증가
- 혼란 야기 (어떤 서비스 사용해야 할지)
- 보안 리스크 (두 개의 인증 시스템)

**해결 방법**:
```bash
# 1. Firebase 디렉토리 삭제
rm -rf lib/firebase/

# 2. 패키지 언인스톨
npm uninstall firebase

# 3. 환경변수 정리 (.env.local)
# NEXT_PUBLIC_FIREBASE_* 변수 삭제

# 4. import 검색 및 수정
grep -r "from '@/lib/firebase" app/ components/
```

### 8.2 심각도: 🟠 High (조속히 수정 필요)

#### 8.2.1 타입 정의 불일치

**파일**: `types/index.ts` vs `supabase/schema.sql`

```typescript
// types/index.ts
interface Company {
  ceo: string;         // ❌ DB에 없는 필드
  founded: string;     // ❌ DB에 없는 필드
  homepage: string;    // ❌ DB에는 'website'
}

// 실제 DB (schema.sql)
ceo_name TEXT
established TEXT
website TEXT
```

**영향**:
- 런타임 에러 가능성
- 데이터 매핑 실패
- 혼란 야기

**해결 방법**:
```typescript
// types/index.ts 수정
interface Company {
  ceoName: string;        // ✅ DB 컬럼명과 일치
  established: string;    // ✅ DB 컬럼명과 일치
  website: string;        // ✅ DB 컬럼명과 일치

  // 또는 별칭 제공
  get ceo() { return this.ceoName; }
  get founded() { return this.established; }
}
```

#### 8.2.2 온보딩 미완성 필드

**파일**: `app/talent/page.tsx` (51줄, 56줄)

```typescript
nationality: 'Korea', // TODO: 온보딩에 국적 추가 필요
availability: 'Available', // TODO: 온보딩에 가용성 추가 필요
```

**문제**:
- 인재풀에서 표시하려는 필드가 온보딩에 없음
- 항상 하드코딩된 기본값만 표시됨
- 사용자 경험 저하

**해결 방법**:
1. 온보딩에 국적, 가용성 필드 추가
2. `users` 테이블에 컬럼 추가
3. 프로필 편집에서 수정 가능하게

#### 8.2.3 결제 시스템 미구현

**문제**:
- 채용공고 생성 시 과금 정보는 저장되지만
- 실제 결제 프로세스 없음
- `payment_status`는 수동 업데이트만 가능

**현재 상태**:
```typescript
// jobs 테이블
payment_status: 'pending'  // 항상 pending
payment_paid_at: NULL      // 결제 완료 시간 없음
```

**해결 방법**:
1. 결제 게이트웨이 연동 (토스페이먼츠, 아임포트 등)
2. 결제 완료 webhook 처리
3. `payment_status` 자동 업데이트
4. 결제 실패 시 공고 비활성화

### 8.3 심각도: 🟡 Medium (개선 필요)

#### 8.3.1 파일 업로드 검증 부족

**문제**:
```typescript
// 파일 크기만 체크
if (file.size > 10 * 1024 * 1024) {
  setError('파일 크기는 10MB 이하여야 합니다.');
}

// MIME 타입 검증 없음
// 악성 파일 업로드 가능성
```

**해결 방법**:
```typescript
const ALLOWED_TYPES = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];

if (!ALLOWED_TYPES.includes(file.type)) {
  setError('PDF, DOC, DOCX 파일만 업로드 가능합니다.');
  return;
}

// 확장자 검증
const ext = file.name.split('.').pop()?.toLowerCase();
if (!['pdf', 'doc', 'docx'].includes(ext || '')) {
  setError('허용되지 않는 파일 확장자입니다.');
  return;
}
```

#### 8.3.2 페이지네이션 미구현

**문제**:
- 채용공고 목록 (`/jobs`)
- 기업 목록 (`/companies`)
- 인재풀 (`/talent`)
- 모두 전체 데이터를 한 번에 로드

**영향**:
- 데이터가 많아지면 성능 저하
- 초기 로딩 시간 증가

**해결 방법**:
```typescript
// Supabase pagination
const { data, error } = await supabase
  .from('jobs')
  .select('*')
  .range(0, 19)  // 0~19 (20개)
  .order('posted_at', { ascending: false });

// 또는 무한 스크롤
const loadMore = async () => {
  const { data } = await supabase
    .from('jobs')
    .select('*')
    .range(offset, offset + 19)
    .order('posted_at', { ascending: false });

  setJobs([...jobs, ...data]);
  setOffset(offset + 20);
};
```

#### 8.3.3 검색 기능 미구현

**문제**:
- 채용공고 검색
- 기업 검색
- 인재풀 검색
- 모두 클라이언트 사이드 필터링만 가능

**해결 방법**:
```typescript
// Supabase Full-Text Search
const { data, error } = await supabase
  .from('jobs')
  .select('*')
  .textSearch('title', searchQuery)
  .order('posted_at', { ascending: false });

// 또는 ilike (부분 일치)
const { data, error } = await supabase
  .from('jobs')
  .select('*')
  .ilike('title', `%${searchQuery}%`)
  .order('posted_at', { ascending: false });
```

### 8.4 심각도: 🟢 Low (나중에 개선)

#### 8.4.1 console.log 과다 사용

**문제**:
- 프로덕션 빌드에도 console.log 남음
- 성능 영향 (미미하지만)
- 보안 리스크 (민감 정보 노출 가능성)

**해결 방법**:
```typescript
// 개발 환경에서만 로그
if (process.env.NODE_ENV === 'development') {
  console.log('[AuthContext] 초기화 시작');
}

// 또는 전용 logger 사용
import logger from '@/lib/logger';
logger.debug('[AuthContext] 초기화 시작');
```

#### 8.4.2 국제화(i18n) 미지원

**문제**:
- 다국어 플랫폼인데 모든 텍스트가 한국어 하드코딩
- 영어 번역 없음

**해결 방법**:
```typescript
// next-intl 또는 next-i18next 사용
import { useTranslations } from 'next-intl';

const t = useTranslations('Common');
<button>{t('submit')}</button>
```

#### 8.4.3 접근성(a11y) 개선 필요

**문제**:
- ARIA 레이블 부족
- 키보드 네비게이션 미흡
- 스크린 리더 지원 부족

**해결 방법**:
- Radix UI 적극 활용 (이미 사용 중)
- eslint-plugin-jsx-a11y 도입
- ARIA 속성 추가

---

## 9. 개선 제안

### 9.1 우선순위 1: 즉시 실행 (1주일 이내)

#### 9.1.1 데이터 손실 방지
```typescript
// ✅ lib/supabase/company-service.ts 수정
// ✅ revenue, funding, avgSalary, avgTenure 저장 로직 추가
// ✅ OnboardingStep4 타입에 필드 추가
```

#### 9.1.2 AuthContext 통합
```typescript
// ✅ AuthContext.tsx vs AuthContext_Supabase.tsx 비교
// ✅ 우수한 버전 선택 (권장: AuthContext.tsx)
// ✅ 하나로 통합
// ✅ 사용하지 않는 파일 삭제
```

#### 9.1.3 Firebase 완전 제거
```bash
# ✅ lib/firebase/ 삭제
# ✅ firebase 패키지 언인스톨
# ✅ 환경변수 정리
# ✅ import 검색 및 수정
```

### 9.2 우선순위 2: 단기 (2주일 이내)

#### 9.2.1 타입 정의 통일
```typescript
// ✅ types/index.ts 수정
// ✅ DB 컬럼명과 일치시키기
// ✅ 별칭 제공 (하위 호환성)
```

#### 9.2.2 온보딩 필드 추가
```typescript
// ✅ 국적 (nationality) 추가
// ✅ 가용성 (availability) 추가
// ✅ users 테이블에 컬럼 추가
// ✅ 온보딩 폼 수정
```

#### 9.2.3 파일 업로드 검증 강화
```typescript
// ✅ MIME 타입 검증
// ✅ 확장자 검증
// ✅ 바이러스 스캔 (선택)
```

### 9.3 우선순위 3: 중기 (1개월 이내)

#### 9.3.1 결제 시스템 구현
```typescript
// 1. 결제 게이트웨이 선택 (토스페이먼츠 권장)
// 2. 결제 페이지 개발
// 3. Webhook 처리
// 4. 자동 상태 업데이트
```

#### 9.3.2 페이지네이션 구현
```typescript
// 1. 채용공고 목록
// 2. 기업 목록
// 3. 인재풀
// 무한 스크롤 또는 페이지 번호
```

#### 9.3.3 검색 기능 구현
```typescript
// 1. Full-Text Search (Supabase)
// 2. 필터링 (위치, 급여, 경력)
// 3. 정렬 (최신순, 인기순)
```

### 9.4 우선순위 4: 장기 (3개월 이내)

#### 9.4.1 국제화(i18n)
```typescript
// 1. next-intl 도입
// 2. 영어 번역 추가
// 3. 언어 선택 기능
```

#### 9.4.2 성능 최적화
```typescript
// 1. 이미지 Lazy Loading
// 2. 서버 컴포넌트 최적화
// 3. 캐싱 전략 (Redis)
// 4. CDN 활용
```

#### 9.4.3 보안 강화
```typescript
// 1. Rate Limiting (채용공고 생성, 로그인)
// 2. CSRF 토큰
// 3. XSS 방어
// 4. Sentry 에러 추적
```

#### 9.4.4 AI/매칭 시스템
```typescript
// 1. 구직자-공고 매칭 알고리즘
// 2. 추천 시스템
// 3. 자동 필터링
```

### 9.5 리팩토링 필요 영역

#### 9.5.1 큰 컴포넌트 분할
```
app/company-auth/onboarding/page.tsx (수백 줄)
  ↓ 분할
  ├─ OnboardingStep1.tsx
  ├─ OnboardingStep2.tsx
  ├─ ...
  └─ OnboardingContainer.tsx
```

#### 9.5.2 중복 코드 제거
```typescript
// 파일 업로드 로직 통합
lib/utils/fileUpload.ts
  ├─ uploadImage()
  ├─ uploadResume()
  └─ uploadDocument()
```

#### 9.5.3 에러 처리 통일
```typescript
// lib/utils/errorHandler.ts
export const handleSupabaseError = (error: any) => {
  if (error?.code === '23505') {
    return '이미 존재하는 데이터입니다.';
  }
  // ...
};
```

### 9.6 아키텍처 개선 제안

#### 9.6.1 레이어 분리

```
현재:
  Page → Supabase Service

개선:
  Page → API Route → Service → Repository → Supabase

장점:
  - 서버 사이드 로직 분리
  - 보안 강화 (클라이언트에서 직접 DB 접근 안 함)
  - 테스트 용이
```

#### 9.6.2 상태 관리 개선

```typescript
// 현재: Context만 사용
// 개선: Zustand 또는 Jotai 도입

import { create } from 'zustand';

interface AuthStore {
  user: User | null;
  userType: UserType | null;
  setUser: (user: User) => void;
  logout: () => void;
}

export const useAuthStore = create<AuthStore>((set) => ({
  user: null,
  userType: null,
  setUser: (user) => set({ user }),
  logout: () => set({ user: null, userType: null })
}));
```

#### 9.6.3 API 라우트 활용

```typescript
// app/api/jobs/route.ts
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const page = searchParams.get('page') || '1';

  const jobs = await getJobs({ page: parseInt(page), limit: 20 });

  return Response.json(jobs);
}

// 장점:
// - 서버 사이드 렌더링
// - 보안 강화
// - Rate Limiting 적용 가능
```

---

## 10. 결론 및 다음 단계

### 10.1 프로젝트 현황 요약

**전체 완성도**: ⭐⭐⭐⭐☆ (80%)

#### 10.1.1 완료된 주요 기능
- ✅ 기업/개인 회원가입 및 온보딩
- ✅ 인증 시스템 (Supabase 통합)
- ✅ 채용공고 생성 및 관리
- ✅ 과금 시스템 (Standard/Top/Premium)
- ✅ 관리자 대시보드
- ✅ 인재풀 시스템
- ✅ Firebase → Supabase 마이그레이션 (85%)

#### 10.1.2 미완성 기능
- ⏳ 결제 시스템 (과금 정보만 저장, 실제 결제 없음)
- ⏳ 검색 및 필터링 (클라이언트 사이드만)
- ⏳ 페이지네이션
- ⏳ 국제화(i18n)
- ⏳ AI 매칭 시스템

### 10.2 기술적 강점

1. **최신 기술 스택**
   - Next.js 15 App Router
   - React 19
   - TypeScript
   - Supabase (PostgreSQL + Auth)

2. **성능 최적화**
   - VIEW를 통한 N+1 문제 해결
   - 인덱스 최적화 (49개)
   - Cloudinary 이미지 최적화

3. **확장성**
   - 모듈화된 서비스 레이어
   - 정규화된 데이터베이스
   - Row Level Security (RLS)

4. **문서화**
   - 상세한 마이그레이션 가이드
   - 명확한 코드 주석
   - 분석 문서 풍부

### 10.3 주요 위험 요소

#### 10.3.1 Critical (즉시 해결 필요)
1. 🔴 **데이터 손실** (revenue, funding 등)
2. 🔴 **AuthContext 이중화** (혼란 야기)
3. 🔴 **Firebase 의존성 미제거** (보안 리스크)

#### 10.3.2 High (조속히 해결 필요)
1. 🟠 **타입 불일치** (런타임 에러 가능성)
2. 🟠 **결제 시스템 미구현** (비즈니스 모델 완성 불가)
3. 🟠 **온보딩 필드 누락** (사용자 경험 저하)

### 10.4 즉시 실행 가능한 Action Items

#### Week 1: Critical 이슈 해결

**Day 1-2**:
- [ ] revenue, funding, avgSalary, avgTenure 저장 로직 수정
- [ ] 테스트 (회원가입 → 데이터 확인)

**Day 3-4**:
- [ ] AuthContext 통합 (하나로 통합)
- [ ] 전체 인증 플로우 테스트
  - 기업 회원가입 → 로그인 → 대시보드
  - 개인 회원가입 → 로그인 → 대시보드

**Day 5-7**:
- [ ] Firebase 의존성 완전 제거
  - lib/firebase/ 삭제
  - firebase 패키지 언인스톨
  - import 검색 및 수정
  - 빌드 테스트

#### Week 2: 타입 및 검증

**Day 1-3**:
- [ ] types/index.ts 수정 (DB 컬럼명 일치)
- [ ] 전체 타입 검증
- [ ] TypeScript 컴파일 에러 해결

**Day 4-5**:
- [ ] 파일 업로드 검증 강화
  - MIME 타입 체크
  - 확장자 검증
  - 테스트 (악성 파일 차단 확인)

**Day 6-7**:
- [ ] 온보딩 필드 추가
  - nationality, availability
  - users 테이블 마이그레이션
  - 온보딩 폼 수정

#### Week 3-4: 핵심 기능 완성

**결제 시스템**:
- [ ] 결제 게이트웨이 선택 (토스페이먼츠)
- [ ] 결제 페이지 개발
- [ ] Webhook 처리
- [ ] 테스트

**페이지네이션**:
- [ ] 채용공고 목록
- [ ] 기업 목록
- [ ] 인재풀

**검색 기능**:
- [ ] Full-Text Search 구현
- [ ] 필터링 (위치, 급여, 경력)

### 10.5 장기 로드맵 (3개월)

**Month 1**: 핵심 기능 안정화
- Critical/High 이슈 모두 해결
- 결제 시스템 완성
- 페이지네이션 및 검색

**Month 2**: 성능 및 보안 강화
- 이미지 Lazy Loading
- Rate Limiting
- Sentry 에러 추적
- 캐싱 전략

**Month 3**: 고급 기능 추가
- 국제화(i18n)
- AI 매칭 시스템
- 추천 알고리즘
- 알림 시스템

### 10.6 프로젝트 성공 지표

#### 기술 지표
- [ ] TypeScript 타입 안정성 100%
- [ ] 빌드 에러 0개
- [ ] 페이지 로드 시간 < 3초
- [ ] Lighthouse 점수 > 90

#### 비즈니스 지표
- [ ] 결제 시스템 완성
- [ ] 채용공고 등록 > 100개
- [ ] 기업 회원 > 50개
- [ ] 개인 회원 > 500명

#### 사용자 경험 지표
- [ ] 회원가입 완료율 > 80%
- [ ] 공고 등록 완료율 > 90%
- [ ] 이탈률 < 30%

### 10.7 최종 권장사항

**즉시 실행**:
1. 🔴 데이터 손실 방지 (revenue, funding 등)
2. 🔴 AuthContext 통합
3. 🔴 Firebase 제거

**단기 실행 (2주)**:
4. 🟠 타입 정의 통일
5. 🟠 파일 업로드 검증
6. 🟠 온보딩 필드 추가

**중기 실행 (1개월)**:
7. 🟡 결제 시스템 구현
8. 🟡 페이지네이션
9. 🟡 검색 기능

**장기 실행 (3개월)**:
10. 🟢 국제화
11. 🟢 성능 최적화
12. 🟢 AI 매칭 시스템

---

## 📊 종합 점수카드

| 카테고리 | 점수 | 상태 |
|---------|------|------|
| **기술 스택** | 5/5 | ⭐⭐⭐⭐⭐ 최신 기술 |
| **아키텍처** | 4/5 | ⭐⭐⭐⭐☆ 잘 구조화됨 |
| **TypeScript** | 4/5 | ⭐⭐⭐⭐☆ 대부분 타입 안전 |
| **에러 처리** | 3/5 | ⭐⭐⭐☆☆ 개선 필요 |
| **성능** | 4/5 | ⭐⭐⭐⭐☆ 최적화 잘됨 |
| **보안** | 4/5 | ⭐⭐⭐⭐☆ RLS 설정 우수 |
| **문서화** | 5/5 | ⭐⭐⭐⭐⭐ 매우 상세함 |
| **코드 품질** | 4/5 | ⭐⭐⭐⭐☆ 모듈화 잘됨 |
| **마이그레이션** | 4.5/5 | ⭐⭐⭐⭐☆ 85% 완료 |
| **기능 완성도** | 4/5 | ⭐⭐⭐⭐☆ 80% 완성 |

**총점**: 41.5/50 (83%)

---

## 📌 핵심 요약

### ✅ 강점
1. 최신 기술 스택 (Next.js 15, React 19, Supabase)
2. 잘 설계된 데이터베이스 (17개 테이블 + 2개 VIEW)
3. 상세한 문서화
4. Supabase 마이그레이션 85% 완료
5. 과금 시스템 구조 완성

### ⚠️ 개선 필요
1. 데이터 손실 방지 (revenue, funding 등)
2. AuthContext 이중화 해결
3. Firebase 완전 제거
4. 타입 정의 통일
5. 결제 시스템 구현

### 🎯 다음 단계
1. **Week 1**: Critical 이슈 해결 (데이터 손실, AuthContext, Firebase)
2. **Week 2**: 타입 및 검증 (타입 통일, 파일 검증, 온보딩 필드)
3. **Week 3-4**: 핵심 기능 (결제, 페이지네이션, 검색)
4. **Month 2-3**: 고급 기능 (i18n, AI 매칭)

---

**작성일**: 2025-10-15
**분석 도구**: Claude Code AI
**분석 범위**: 전체 프로젝트 (49 페이지, 46 컴포넌트, 19 서비스 모듈)
**버전**: 1.0

---

## 부록

### A. 주요 파일 경로 참조

```
C:\Users\jooye\Desktop\20250919jobmatch\
├── app\layout.tsx                                    # 루트 레이아웃
├── contexts\AuthContext.tsx                          # 인증 컨텍스트 (활성)
├── lib\supabase\company-service.ts                   # 기업 서비스
├── lib\supabase\jobseeker-service.ts                 # 개인 서비스
├── supabase\schema.sql                               # DB 스키마 (627줄)
├── types\index.ts                                    # 공통 타입
├── constants\job-posting.ts                          # 과금 정보
└── scripts\migrate-firebase-to-supabase.ts           # 마이그레이션 스크립트
```

### B. 환경 변수 체크리스트

```bash
# Supabase (필수)
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=        # 마이그레이션용

# Cloudinary (필수)
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=
NEXT_PUBLIC_CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# Firebase (제거 예정)
# NEXT_PUBLIC_FIREBASE_API_KEY=
# NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
# ...
```

### C. 연락처 및 리소스

- **Supabase Dashboard**: https://kzovapvythsgskklmukj.supabase.co
- **Cloudinary Console**: https://console.cloudinary.com
- **프로젝트 Repo**: (GitHub URL)
- **배포 URL**: (Vercel URL)

---

**보고서 끝**